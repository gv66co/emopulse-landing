<!DOCTYPE html>
<html lang="lt">
<head>
    <meta charset="UTF-8">
    <title>EMOPULSE PRO - LIVE NEURAL TERMINAL</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <style>
        /* TAVO STILIŲ PAGRINDAS + KOSMINĖS GELMĖS MODIFIKACIJOS */
        :root {
            --deep-bg: #020617;
            --accent-cyan: #3a8dff;
            --accent-joy: #ff9f1c;
            --accent-stress: #ff3b3b;
            --glass: rgba(15, 23, 42, 0.8);
        }

        body {
            background: var(--deep-bg);
            color: #f8fafc;
            margin: 0;
            font-family: 'Inter', sans-serif;
            overflow: hidden;
            /* Sukuriamas tavo nuotraukoje matomas vinjetės efektas */
            background: radial-gradient(circle at center, #0f172a 0%, #020617 100%);
        }

        /* Pagrindinis tinklelis (Layout) */
        .terminal-grid {
            display: grid;
            grid-template-columns: 1.2fr 0.8fr;
            grid-template-rows: 1fr 180px;
            height: 100vh;
            gap: 24px;
            padding: 32px;
            box-sizing: border-box;
        }

        /* 3D NAVIGATORIUS - GELMĖS EFEKTAS */
        .viewport-3d {
            grid-column: 1;
            grid-row: 1;
            position: relative;
            background: var(--glass);
            border-radius: 32px;
            border: 1px solid rgba(58, 141, 255, 0.2);
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
            overflow: hidden;
        }

        /* ANALIZĖS PANELĖ */
        .analysis-panel {
            grid-column: 2;
            grid-row: 1;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .camera-aura-box {
            height: 280px;
            background: var(--glass);
            border-radius: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }

        #webcam {
            width: 180px;
            height: 180px;
            border-radius: 50%;
            object-fit: cover;
            border: 2px solid var(--accent-cyan);
            z-index: 2;
        }

        /* GYVOJI AURA (DRIFT) */
        .aura-glow {
            position: absolute;
            width: 240px;
            height: 240px;
            border-radius: 50%;
            background: radial-gradient(circle, var(--accent-cyan) 0%, transparent 70%);
            filter: blur(30px);
            opacity: 0.5;
            animation: auraDrift 5s infinite alternate ease-in-out;
        }

        /* DUOMENŲ KORTELĖS APAČIOJE */
        .metrics-row {
            grid-column: 1 / span 2;
            display: flex;
            gap: 20px;
        }

        .metric-card {
            flex: 1;
            background: var(--glass);
            border-radius: 20px;
            padding: 24px;
            border-top: 4px solid var(--accent-cyan);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .value-large {
            font-size: 32px;
            font-weight: 800;
            margin-top: 8px;
        }

        @keyframes auraDrift {
            from { transform: scale(1) translate(-5px, -5px); opacity: 0.4; }
            to { transform: scale(1.1) translate(5px, 5px); opacity: 0.6; }
        }

        canvas { width: 100% !important; height: 100% !important; }
    </style>
</head>
<body>

    <div class="terminal-grid">
        <section class="viewport-3d" id="three-container">
            <div style="position: absolute; top: 20px; left: 20px; color: var(--accent-cyan); letter-spacing: 2px; font-size: 12px;">NEURAL_NAVIGATOR_V3.CORE</div>
        </section>

        <section class="analysis-panel">
            <div class="camera-aura-box">
                <div class="aura-glow" id="aura-field"></div>
                <video id="webcam" autoplay muted playsinline></video>
            </div>

            <div class="metric-card" style="border-color: var(--accent-joy);">
                <div style="opacity: 0.6; font-size: 12px; text-transform: uppercase;">Real-time Resonance</div>
                <div class="value-large" id="res-text">Calm Focused</div>
                <div style="color: var(--accent-joy); font-size: 14px; margin-top: 5px;">#calm #focused #energy</div>
            </div>
        </section>

        <footer class="metrics-row">
            <div class="metric-card">
                <div style="opacity: 0.6; font-size: 12px;">EMOPULSE SCORE</div>
                <div class="value-large" id="score-val">76<span style="font-size: 16px; opacity: 0.5;"> / 100</span></div>
            </div>
            <div class="metric-card">
                <div style="opacity: 0.6; font-size: 12px;">STRESS RISK</div>
                <div class="value-large" id="stress-val" style="color: var(--accent-stress);">0,21</div>
            </div>
            <div class="metric-card">
                <div style="opacity: 0.6; font-size: 12px;">NEURAL ENERGY</div>
                <div class="value-large" id="energy-val">0.66</div>
            </div>
        </footer>
    </div>

    <script>
        // --- 1. REALISTIŠKAS 3D MODELIS (Three.js) ---
        const container = document.getElementById('three-container');
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(75, container.clientWidth / container.clientHeight, 0.1, 1000);
        const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
        
        renderer.setSize(container.clientWidth, container.clientHeight);
        renderer.setPixelRatio(window.devicePixelRatio);
        container.appendChild(renderer.domElement);

        // Sukuriamas "Kosminis Branduolys" (Orbital Compass)
        const coreGroup = new THREE.Group();
        scene.add(coreGroup);

        // Pagrindinė sfera (Glow sphere)
        const coreGeo = new THREE.SphereGeometry(1.5, 64, 64);
        const coreMat = new THREE.MeshBasicMaterial({ 
            color: 0x3a8dff, 
            transparent: true, 
            opacity: 0.15,
            wireframe: false 
        });
        const coreSphere = new THREE.Mesh(coreGeo, coreMat);
        coreGroup.add(coreSphere);

        // Orbitaliniai žiedai (kaip tavo nuotraukoje)
        const ringMat = new THREE.MeshBasicMaterial({ color: 0x3a8dff, transparent: true, opacity: 0.4, side: THREE.DoubleSide });
        const createOrbit = (radius, rx, ry) => {
            const ringGeo = new THREE.TorusGeometry(radius, 0.01, 16, 100);
            const ring = new THREE.Mesh(ringGeo, ringMat);
            ring.rotation.x = rx;
            ring.rotation.y = ry;
            return ring;
        };

        const r1 = createOrbit(2.2, Math.PI/2, 0.5);
        const r2 = createOrbit(2.4, 0.2, 0.8);
        const r3 = createOrbit(2.6, 1.2, 0.3);
        coreGroup.add(r1, r2, r3);

        camera.position.z = 7;

        // --- 2. KAMEROS IR EMOCIJŲ JUNGTIS ---
        navigator.mediaDevices.getUserMedia({ video: true }).then(s => {
            document.getElementById('webcam').srcObject = s;
        });

        // Simuliuojame realaus laiko skaitymą (čia jungiamas tavo API)
        function updateNeuralCore() {
            const stress = (Math.random() * 0.5).toFixed(2);
            document.getElementById('stress-val').textContent = stress;
            
            // Keičiame 3D objekto spalvą ir greitį pagal stresą
            if (stress > 0.3) {
                coreMat.color.setHex(0xff3b3b);
                coreGroup.rotation.y += 0.05; // Greitėja
            } else {
                coreMat.color.setHex(0x3a8dff);
                coreGroup.rotation.y += 0.01;
            }
        }

        function animate() {
            requestAnimationFrame(animate);
            coreGroup.rotation.x += 0.002;
            coreGroup.rotation.y += 0.003;
            
            // "Kvėpavimo" efektas sferai
            const pulse = 1 + Math.sin(Date.now() * 0.001) * 0.05;
            coreGroup.scale.set(pulse, pulse, pulse);
            
            renderer.render(scene, camera);
        }

        animate();
        setInterval(updateNeuralCore, 2000);
    </script>
</body>
</html>
