<!DOCTYPE html>
<html lang="lt">
<head>
    <meta charset="UTF-8">
    <title>EMOPULSE - NEURAL CORE V5</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <style>
        body, html { margin: 0; padding: 0; background: #000; overflow: hidden; font-family: 'Inter', sans-serif; }
        
        #ui-layer {
            position: absolute; inset: 0; z-index: 10;
            display: flex; justify-content: space-between;
            padding: 60px; pointer-events: none;
        }

        .side-panel {
            width: 380px; background: rgba(0, 5, 15, 0.4);
            backdrop-filter: blur(40px); border-radius: 40px;
            padding: 45px; border: 1px solid rgba(255, 255, 255, 0.05);
            pointer-events: auto;
        }

        .cam-ring {
            width: 220px; height: 220px; border-radius: 50%;
            border: 1px solid #3a8dff; margin: 0 auto 30px;
            overflow: hidden; box-shadow: 0 0 50px rgba(58, 141, 255, 0.2);
        }
        #webcam { width: 100%; height: 100%; object-fit: cover; }

        .title { font-size: 24px; font-weight: 200; color: #fff; margin-bottom: 5px; }
        .tags { color: #3a8dff; font-size: 14px; opacity: 0.8; letter-spacing: 1px; }
    </style>
</head>
<body>

    <div id="ui-layer">
        <div style="font-size: 18px; letter-spacing: 10px; font-weight: 100; color: rgba(255,255,255,0.3);">EMOPULSE</div>
        
        <div class="side-panel">
            <div class="cam-ring"><video id="webcam" autoplay muted playsinline></video></div>
            <div class="title">Understand your emotional field</div>
            <div class="tags">#calm #focused #energy</div>
            
            <div style="margin-top: 40px; border-top: 1px solid rgba(255,255,255,0.05); padding-top: 30px;">
                <div style="font-size: 10px; opacity: 0.5; letter-spacing: 3px;">STRESS RISK</div>
                <div style="font-size: 28px; color: #ff9f1c;">0.21 Low</div>
            </div>
        </div>
    </div>

    <script>
        let scene, camera, renderer, coreGroup, floorLight;

        function init() {
            scene = new THREE.Scene();
            camera = new THREE.PerspectiveCamera(40, window.innerWidth / window.innerHeight, 0.1, 1000);
            camera.position.set(0, 1, 12);

            renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.setPixelRatio(window.devicePixelRatio);
            document.body.appendChild(renderer.domElement);

            coreGroup = new THREE.Group();
            coreGroup.position.set(-4, -1, 0); // Pozicija labiau į kairę ir apačią
            scene.add(coreGroup);

            // 1. ŠVIESA IŠ APAČIOS (Tas ryškus "Wow" efektas)
            const lightPivot = new THREE.Object3D();
            lightPivot.position.y = -4;
            coreGroup.add(lightPivot);

            const floorGlowGeo = new THREE.CircleGeometry(5, 64);
            const floorGlowMat = new THREE.MeshBasicMaterial({
                color: 0x3a8dff,
                transparent: true,
                opacity: 0.15,
                blending: THREE.AdditiveBlending,
                side: THREE.DoubleSide
            });
            floorLight = new THREE.Mesh(floorGlowGeo, floorGlowMat);
            floorLight.rotation.x = Math.PI / 2.1;
            lightPivot.add(floorLight);

            // 2. PAGRINDINIS BRANDUOLYS (Holografinis sluoksnis)
            const sphereGeo = new THREE.SphereGeometry(2, 64, 64);
            const sphereMat = new THREE.MeshPhongMaterial({
                color: 0x001133,
                emissive: 0x3a8dff,
                emissiveIntensity: 0.2,
                transparent: true,
                opacity: 0.4,
                shininess: 100
            });
            const core = new THREE.Mesh(sphereGeo, sphereMat);
            coreGroup.add(core);

            // 3. SUSILIETĖS ORBITOS (Aura Drift)
            const colors = [0x3a8dff, 0x00ffff, 0xff9f1c];
            colors.forEach((c, i) => {
                const ring = new THREE.Mesh(
                    new THREE.TorusGeometry(3 + i * 0.4, 0.005, 16, 100),
                    new THREE.MeshBasicMaterial({ color: c, transparent: true, opacity: 0.3 })
                );
                ring.rotation.x = Math.random() * Math.PI;
                ring.rotation.y = Math.random() * Math.PI;
                coreGroup.add(ring);
            });

            // Apšvietimas
            const mainLight = new THREE.PointLight(0x3a8dff, 2, 20);
            mainLight.position.set(2, 5, 5);
            scene.add(mainLight);

            animate();
        }

        function animate() {
            requestAnimationFrame(animate);
            const time = Date.now() * 0.0006;

            // DRIFT: Viskas lėtai "plaukioja"
            coreGroup.position.y = -1 + Math.sin(time) * 0.3;
            coreGroup.rotation.y += 0.002;

            // Orbitos sukasi skirtingais greičiais, kad spalvos "susilietų"
            coreGroup.children.forEach((child, i) => {
                if(i > 1) { // Praleidžiam šviesą ir pagrindinę sferą
                    child.rotation.z += 0.005 * (i * 0.5);
                    child.rotation.x += 0.002;
                }
            });

            // Apačios šviesos pulsacija
            floorLight.scale.setScalar(1 + Math.sin(time * 2) * 0.05);

            renderer.render(scene, camera);
        }

        // Kamera
        navigator.mediaDevices.getUserMedia({ video: true }).then(s => {
            document.getElementById('webcam').srcObject = s;
        });

        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });

        init();
    </script>
</body>
</html>
